<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Demographics - Dr Fizz</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg:#0d0d0d;
      --muted:#ffffff;
      --accent:#f59e0b;
      --accent-2:#ffb86b;
      --text:#ffffff;
    }
    html, body {
      height:100%; margin:0;
      background:var(--bg);
      font-family:Montserrat,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;
      color:var(--text);
      -webkit-font-smoothing:antialiased;
    }
    body::before {
      content:"";
      position:fixed; inset:0; z-index:0;
      background-image:radial-gradient(rgba(255,255,255,0.03) 1px, transparent 1px);
      background-size:26px 26px;
      pointer-events:none;
    }
    section#pin {
      position:relative;
      z-index:1;
      height:100vh;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      overflow:visible;
    }
    .container {
      width:100%;
      max-width:1200px;
      margin:0 auto;
      padding:48px 36px;
      display:grid;
      grid-template-rows: auto 1fr;
      gap:18px;
      height: 100%;
    }
    .title-row {
      display:flex;
      align-items:flex-start;
      gap:12px;
    }
    .title {
      font-size:56px;
      font-weight:800;
      margin:0;
      letter-spacing:1px;
      padding-left: 50px;
    }
    .title .accent {
      color:var(--accent);
      margin-left:12px;
      font-weight:800;
    }
    .content-row {
      display:grid;
      grid-template-columns:92px 450px 1fr;
      align-items: stretch;  
      height: 100%;
    }
    .left {
      position:relative;
      height: 450px;
      padding-top:20px;
      display:flex;
      align-items:flex-start;
      justify-content:center;
      padding-left: 20px;
    }
    .track {
      width:8px;
      height:86%;
      background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border-radius:8px;
      position:relative;
      overflow:visible;
    }
    .fill {
      position:absolute;
      left:0; top:0;
      width:100%;
      height:0%;
      background:linear-gradient(180deg,var(--accent),var(--accent-2));
      border-radius:8px;
      box-shadow:0 4px 14px rgba(245,158,11,0.12);
      transform-origin:top center;
    }
    .list {
      margin-top:25px;
      display:flex;
      flex-direction:column;
      gap:50px;
    }
    .item {
      padding-left:6px;
    }
    .heading {
      margin:0;
      font-size:25px;
      font-weight:700;
      opacity:0.5;
      transform:translateY(6px);
      will-change:opacity,transform;
    }
    .sub {
      margin:6px 0 0 0;
      font-size:15px;
      color:var(--muted);
      opacity:0.35;
      transform:translateY(6px);
      will-change:opacity,transform;
    }
    .right {
      width: 100%;
      height: 100%;
      border-radius:12px;
      display:flex;
      align-items:center;
      justify-content:center;
      color:var(--muted);
      font-weight:700;
      padding:16px;
      position: relative;
      overflow: hidden;
    }

    /* Stage 1 Circle animation styles */
    .circle-container {
      position: relative;
      width: 100%;
      height: 100%;
    }
    svg {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 60vmin;
      height: 60vmin;
    }
    circle.base {
      stroke: #333;
      fill: none;
      stroke-width: 1;
    }
    circle.overlay {
      stroke: url(#paint1);
      fill: none;
      stroke-width: 1;
      opacity: 0;
    }
    .step-icon {
      position: absolute;
      top: 0%;
      left: 50%;
      transform: translate(-50%, 0%);
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #FE9708, #FE9708 70%);
      z-index: 1;
      transition: all 0.4s ease;
    }
    .step-icon.glow {
      background: radial-gradient(circle at 30% 30%, #FFD700, #FE9708 70%);
      box-shadow:
        0 0 20px 5px rgba(255, 151, 8, 0.5),
        0 0 40px 10px rgba(255, 151, 8, 0.4),
        0 0 80px 20px rgba(255, 151, 8, 0.3);
      animation: pulse-glow 2.5s ease-in-out infinite;
    }

    /* Stage 2 Grid styles */
    .grid-wrapper {
      width: 100%;
      height: 100%;
      display:flex;
      align-items:center;
      justify-content:center;
      position: relative;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(7, 70px);
      grid-template-rows: repeat(4, 40px);
      gap: 15px;
      position: relative;
    }
    .ellipse {
      width: 60px;
      height: 25px;
      border: 1px solid rgb(48, 48, 48);
      border-radius: 50%;
      background: transparent;
      transition: background 0.3s, border 0.3s;
    }
    .falling-ellipse {
      width: 60px;
      height: 25px;
      background: #00ff66;
      border-radius: 50%;
      position: absolute;
      top: -150px;
      left: 0;            /* JS will position it */
      transform: none;    /* remove translateX */
      z-index: 2;
    }

    @media (max-width:1000px) {
      .content-row { grid-template-columns:64px 1fr; }
      .right { display:none; }
      .title { font-size:40px; }
    }

/* Stage 3 Falling Icon + Glow */
.falling-icon-wrapper {
  position: absolute;
  top: 10px;        /* starting position */
  left: 50%;
  transform: translateX(-50%);
  width: 82px;      /* icon size */
  height: 83px;
  z-index: 100;
}

.falling-icon {
  width: 100%;
  height: 100%;
  position: relative;
}

.falling-icon svg {
  width: 100% !important;
  height: 100% !important;
}

.icon-glow-container {
  position: relative;
  width: 100%;
  height: 100%;
}

.outer-glow,
.inner-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  pointer-events: none;
  box-sizing: border-box;
  opacity: 0;
}

.outer-glow {
  width: 50px;
  height: 50px;
  background: radial-gradient(circle, rgba(77,147,234,0.85) 0%, rgba(0,114,255,0.1) 80%);
  z-index: 0;
}

.inner-glow {
  width: 50px;
  height: 50px;
  background: radial-gradient(circle, rgba(0,198,255,0.5) 0%, rgba(0,198,255,0.1) 80%);
  z-index: 1;
}


    .box-left,
    .box-center,
    .box-right {
      fill: transparent;
      stroke: #aaa;
      stroke-width: 1.5;
    }

    .highlight {
      opacity: 0;
      fill: url(#gradient);
      fill-opacity: 0.25;
      stroke: url(#gradient);
      stroke-width: 1;
    }
  </style>
</head>
<body>

<section id="pin">
  <div class="container">
    <div class="title-row">
      <h1 class="title">PERFECT <span class="accent">FOR</span></h1>
    </div>

    <div class="content-row">
      <div class="left">
        <div class="track" id="track">
          <div class="fill" id="fill"></div>
        </div>
      </div>

      <div class="center">
        <div class="list" id="list">
          <div class="item">
            <h3 class="heading">Founders &amp; D2C Brands</h3>
            <p class="sub">Grow Inbound Leads On A Budget</p>
          </div>
          <div class="item">
            <h3 class="heading">Digital Agencies</h3>
            <p class="sub">Replace 3â€“4 Expensive Tools With One Platform</p>
          </div>
          <div class="item">
            <h3 class="heading">Freelancers &amp; Consultants</h3>
            <p class="sub">Deliver Faster, Data-Driven Results</p>
          </div>
          <div class="item">
            <h3 class="heading">In-House Marketers</h3>
            <p class="sub">Streamline Content, Backlinks &amp; Reporting</p>
          </div>
        </div>
      </div>

      <div class="right">
        <!-- Stage 1 Circle animation -->
        <div class="circle-container stage1">
          <div class="step-icon"></div>
          <svg viewBox="0 0 400 400">
            <defs>
              <linearGradient id="paint1" x1="0" y1="0" x2="0" y2="1">
                <stop offset="0%" stop-color="#F2F2F2" />
                <stop offset="100%" stop-color="#FE9708" />
              </linearGradient>
            </defs>
            <circle class="base" cx="200" cy="50" r="50" />
            <circle class="overlay overlay-4" cx="200" cy="50" r="50" />
            <circle class="base" cx="200" cy="90" r="90" />
            <circle class="overlay overlay-3" cx="200" cy="90" r="90" />
            <circle class="base" cx="200" cy="140" r="140" />
            <circle class="overlay overlay-2" cx="200" cy="140" r="140" />
            <circle class="base" cx="200" cy="190" r="190" />
            <circle class="overlay overlay-1" cx="200" cy="190" r="190" />
          </svg>
        </div>

        <!-- Stage 2 Grid animation -->
        <div class="grid-wrapper stage2" style="display:none;">
          <div class="grid" id="ellipseGrid">
            <div class="falling-ellipse" id="fallingEllipse"></div>
          </div>
        </div>

        <!-- Stage 3 Falling Icon + Glow animation -->
        <div class="stage3" style="display:none;">
          <div class="falling-icon-wrapper">
          <div class="falling-icon">
            <div class="icon-glow-container">
              <div class="outer-glow"></div>
              <div class="inner-glow"></div>
              <svg width="82" height="83" viewBox="0 0 82 83" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M41 0C44.1046 0 45.7952 7.28276 47.6569 8.29289C49.5186 9.30301 54.0902 4.72718 56.2635 6.90049C58.4368 9.07381 53.861 13.6454 54.8711 15.5071C55.8813 17.3688 63.164 19.0594 63.164 22.164C63.164 25.2686 55.8813 26.9592 54.8711 28.8209C53.861 30.6826 58.4368 35.2542 56.2635 37.4275C54.0902 39.6008 49.5186 35.025 47.6569 36.0351C45.7952 37.0453 44.1046 44.328 41 44.328C37.8954 44.328 36.2048 37.0453 34.3431 36.0351C32.4814 35.025 27.9098 39.6008 25.7365 37.4275C23.5632 35.2542 28.139 30.6826 27.1289 28.8209C26.1187 26.9592 18.836 25.2686 18.836 22.164C18.836 19.0594 26.1187 17.3688 27.1289 15.5071C28.139 13.6454 23.5632 9.07381 25.7365 6.90049C27.9098 4.72718 32.4814 9.30301 34.3431 8.29289C36.2048 7.28276 37.8954 0 41 0Z" fill="url(#paint0_linear_1_2)"/>
                <defs>
                  <linearGradient id="paint0_linear_1_2" x1="41" y1="0" x2="41" y2="83" gradientUnits="userSpaceOnUse">
                    <stop stop-color="#00C6FF"/>
                    <stop offset="1" stop-color="#0072FF"/>
                  </linearGradient>
                </defs>
              </svg>
            </div>
            </div>
          </div>

          <div class="step-illo">
            <svg class="main-graphic" viewBox="0 0 1207 1060" fill="none" xmlns="http://www.w3.org/2000/svg">
              <defs>
                <linearGradient id="gradient" x1="601.397" y1="0" x2="601.397" y2="1058.96" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#00C6FF"/>
                  <stop offset="1" stop-color="#0072FF"/>
                </linearGradient>
              </defs>

              <!-- Left Box -->
              <path class="box-left" d="M0.7 818.6H275V1058.8H0.7V818.6ZM276.5 1058.1V818.3L497.1 690V903.9L276.5 1058.1ZM2.8 817.1L228.8 689.4H495.1L275.6 817.1H2.8Z"/>
              <path class="highlight box-left-highlight" d="M0.7 818.6H275V1058.8H0.7V818.6ZM276.5 1058.1V818.3L497.1 690V903.9L276.5 1058.1ZM2.8 817.1L228.8 689.4H495.1L275.6 817.1H2.8Z"/>

              <!-- Center Box -->
              <path class="box-center" d="M353.3 130.6H627.5V1058.2H353.3V130.6ZM629 1057.6V130.3L849.5 2V903.3L629 1057.6ZM355.3 129.1L581.3 1.5H847.6L628 129.1H355.3Z"/>
              <path class="highlight box-center-highlight" d="M353.3 130.6H627.5V1058.2H353.3V130.6ZM629 1057.6V130.3L849.5 2V903.3L629 1057.6ZM355.3 129.1L581.3 1.5H847.6L628 129.1H355.3Z"/>

              <!-- Right Box -->
              <path class="box-right" d="M709 571.1H983.3V1058.8H709V571.1ZM984.8 1058.1V570.8L1205.4 442.5V903.9L984.8 1058.1ZM711 569.7L937.1 442H1203.4L983.8 569.7H711Z"/>
              <path class="highlight box-right-highlight" d="M709 571.1H983.3V1058.8H709V571.1ZM984.8 1058.1V570.8L1205.4 442.5V903.9L984.8 1058.1ZM711 569.7L937.1 442H1203.4L983.8 569.7H711Z"/>
            </svg>
          </div>
        </div>


      </div>
    </div>
  </div>
</section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
<script>
  gsap.registerPlugin(ScrollTrigger);

  const fill = document.getElementById('fill');
  const items = document.querySelectorAll('.item');
  const right = document.querySelector('.right');

  const overlays = gsap.utils.toArray('.overlay').reverse();
  const stepIcon = document.querySelector('.step-icon');
  const smallestCircle = document.querySelector('.overlay-4');

  // Stage 1 timeline (circle)
  function circleTimeline() {
    const bbox = smallestCircle.getBoundingClientRect();
    const circleCenterY = bbox.top + bbox.height / 2;
    const iconBox = stepIcon.getBoundingClientRect();
    const iconStartY = iconBox.top + iconBox.height / 2;
    const deltaY = circleCenterY - iconStartY;

    let t = gsap.timeline();
    t.to(stepIcon, { y: deltaY, duration: 1, ease: "power2.out" });
    t.add("ball-settled");

    t.to(overlays[0], { opacity: 1, duration: 1 }, "ball-settled")
     .to(overlays[0], { opacity: 0, duration: 1 }, "-=0.2")
     .to(overlays[1], { opacity: 1, duration: 1 }, "-=0.3")
     .to(overlays[1], { opacity: 0, duration: 1 }, "-=0.2")
     .to(overlays[2], { opacity: 1, duration: 1 }, "-=0.3")
     .to(overlays[2], { opacity: 0, duration: 1 }, "-=0.2")
     .to(overlays[3], {
        opacity: 1,
        duration: 1,
        onStart: () => stepIcon.classList.add("glow"),
        onReverseComplete: () => stepIcon.classList.remove("glow")
     }, "-=0.3");

    return t;
  }

  // Build ellipses for stage 2 grid
  const grid = document.getElementById("ellipseGrid");
  const columns = 7, rows = 4;
  for (let i = 0; i < columns * rows; i++) {
    const div = document.createElement("div");
    div.classList.add("ellipse");
    grid.appendChild(div);
  }
  const ellipses = document.querySelectorAll(".ellipse");
  const fallingEllipse = document.getElementById("fallingEllipse");

function ellipseTimeline() {
  const colWidth = 70 + 15; // ellipse width + gap
  const rowHeight = 40 + 15; // ellipse height + gap
  const firstRowMiddleIndex = 3; // middle of first row (0-based)

  const col = firstRowMiddleIndex % columns;
  const row = Math.floor(firstRowMiddleIndex / columns);

  const relativeLeft = col * colWidth; 
  const relativeTop = row * rowHeight;

  fallingEllipse.style.left = `${relativeLeft}px`;
  fallingEllipse.style.top = `-150px`;

  let t = gsap.timeline({
    onStart: () => {
      document.querySelector(".stage1").style.display = "none";
      document.querySelector(".stage2").style.display = "flex";
    },
    onReverseComplete: () => {
      document.querySelector(".stage2").style.display = "none";
      document.querySelector(".stage1").style.display = "flex"; // keep stage1 visible
    }
  });

  // Fall into place
  t.to(fallingEllipse, { top: relativeTop, duration: 1, ease: "power2.out" });

  // Activate rows as before...
  t.to([ellipses[9], ellipses[10], ellipses[11]], {
    borderColor: "#00ff66",
    backgroundColor: "rgba(0,255,102,0.1)", duration: 0.5
  });
  t.to([ellipses[15], ellipses[16], ellipses[17], ellipses[18], ellipses[19]], {
    borderColor: "#00ff66",
    backgroundColor: "rgba(0,255,102,0.1)", duration: 0.5
  });
  t.to(Array.from(ellipses).slice(21, 28), {
    borderColor: "#00ff66",
    backgroundColor: "rgba(0,255,102,0.1)", duration: 0.5
  });

  return t;
}

function stage3Timeline() {
  let t = gsap.timeline({
    onStart: () => {
      document.querySelector(".stage1").style.display = "none";
      document.querySelector(".stage2").style.display = "none";
      document.querySelector(".stage3").style.display = "flex";
    },
    onReverseComplete: () => {
      document.querySelector(".stage3").style.display = "none";
      document.querySelector(".stage2").style.display = "flex"; // show Stage 2 when reversing
    }
  });

  gsap.set(".highlight", { opacity: 0 });

  // Icon falling (pixels instead of vh)
  t.to(".falling-icon-wrapper", { y: 300, ease: "power2.out", duration: 1 }, 0);

  // Glow rings
  t.to(".inner-glow", { scale: 1.5, opacity: 1, duration: 0.5, ease: "power2.out" }, 0.1);
  t.to(".outer-glow", { scale: 2.5, opacity: 1, duration: 0.5, ease: "power2.out" }, 0.1);

  // Box highlights
  t.to(".box-center-highlight", { opacity: 1 }, 0.005);
  t.to(".box-right-highlight", { opacity: 1 }, 0.12);
  t.to(".box-left-highlight", { opacity: 1 }, 0.2);

  return t;
}



  // Main ScrollTrigger timeline
  let tl = gsap.timeline({
    scrollTrigger: {
      trigger: "#pin",
      start: "top top",
      end: "+=4000",
      scrub: true,
      pin: true
    }
  });

  items.forEach((item, i) => {
    let heading = item.querySelector('.heading');
    let sub = item.querySelector('.sub');
    let stage = "stage" + (i+1);

    tl.addLabel(stage);
    let percent = ((i+1) / items.length) * 100;
    tl.to(fill, { height: percent + "%", ease: "none" }, stage);
    tl.to(heading, { opacity: 1, y: 0, duration: 0.5 }, stage)
      .to(sub, { opacity: 0.85, y: 0, duration: 0.5 }, stage);

    if (i === 0) {
      tl.add(circleTimeline(), stage);
    }
    if (i === 1) {
      tl.add(ellipseTimeline(), stage);
    }
    if (i === 2) {
      tl.add(stage3Timeline(), stage);
    }
    if (i === 3) {
      tl.to(right, { backgroundColor: "#9333ea", y: -60, rotation: -15, duration: 1 }, stage);
    }
  });
</script>
</body>
</html>
